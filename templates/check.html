{% extends "base.html" %}
{% block title %}Eligibility Checker{% endblock %}

{% block content %}
<div style="display: flex; gap: 20px; margin: 20px;">
    
    <!-- Left Side - Questions -->
    <div style="flex: 1; background: #f9f9f9; padding: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
        <h2 style="text-align:center; color: #2e7d32;">ü©∫ Eligibility Form</h2>
        <form method="POST">
            {% csrf_token %}

            <label>1. Age:</label>
            <input type="number" name="age" min="1" max="100" required style="width:100%; padding:8px; margin-bottom:10px;">

            <label>2. Do you have any major chronic disease?</label><br>
            <input type="radio" name="chronic_disease" value="yes"> Yes
            <input type="radio" name="chronic_disease" value="no" checked> No
            <br><br>

            <label>3. Do you have any active infection?</label><br>
            <input type="radio" name="infection" value="yes"> Yes
            <input type="radio" name="infection" value="no" checked> No
            <br><br>

            <label>4. Any recent major surgery?</label><br>
            <input type="radio" name="recent_surgery" value="yes"> Yes
            <input type="radio" name="recent_surgery" value="no" checked> No
            <br><br>

            <label>5. Any history of cancer?</label><br>
            <input type="radio" name="cancer_history" value="yes"> Yes
            <input type="radio" name="cancer_history" value="no" checked> No
            <br><br>

            <label>6. Which organ would you like to donate?</label><br>
            <input type="radio" name="organ" value="Kidney"> Kidney <br>
            <input type="radio" name="organ" value="Eye"> Eye <br>
            <input type="radio" name="organ" value="Heart"> Heart <br>
            <input type="radio" name="organ" value="Liver"> Liver <br><br>

            <button type="submit" style="background:#2e7d32; color:white; padding:10px; border:none; border-radius:5px; width:100%; cursor:pointer;">
                Check Eligibility
            </button>
        </form>
    </div>

    <!-- Right Side - Results -->
    <div style="flex: 1; background: #eef7ee; padding: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
        {% if result %}
            {% if eligible %}
                <h2 style="color: #2e7d32;">üéâ Congratulations!</h2>
                <p>{{ result }}</p>
                <h3>Available Hospitals in Karnataka:</h3>
                <ul>
                    {% for hospital in hospitals %}
                        <li style="margin-bottom:10px;">
                            <strong>{{ hospital.name }}</strong><br>
                            {{ hospital.address }} <br>
                            <a href="{{ hospital.website }}" target="_blank">Visit Website</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <h2 style="color: red;">‚ùå Sorry!</h2>
                <p>{{ result }}</p>
            {% endif %}
        {% else %}
            <p>üëâ Fill out the form to check your eligibility.</p>
        {% endif %}
    </div>

</div>
{% endblock %}
