{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="hero">
    <h2>Welcome, {{ request.user.username }}</h2>
    <p class="tagline">Here is your organ donation status and hospital list.</p>
</div>

<div class="user-register-container">
    <h3>Your Latest Eligibility Result:</h3>

    {% if result %}
        <div class="result {% if result == 'Ineligible' %}not-eligible{% endif %}">
            Status: {{ result }}
        </div>
    {% else %}
        <p>No eligibility check found.</p>
    {% endif %}

    {% if ineligibility_reason %}
        <p><strong>Reason(s):</strong> {{ ineligibility_reason }}</p>
    {% endif %}

    {% if advice %}
        <p><strong>Advice:</strong> {{ advice }}</p>
    {% endif %}
</div>

<div class="user-register-container">
    <h3>Your Previous Eligibility Checks</h3>
    {% if eligibility_history %}
        <ul>
            {% for check in eligibility_history %}
                <li>{{ check.checked_at }} - {% if check.is_eligible %}Eligible{% else %}Ineligible{% endif %}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No past checks available.</p>
    {% endif %}
</div>

<div class="user-register-container">
    <h3>Nearby Hospitals</h3>
    {% if hospitals %}
        <ul>
            {% for hospital in hospitals %}
                <li>
                    <strong>{{ hospital.name }}</strong><br>
                    {{ hospital.address }}<br>
                    <a href="{{ hospital.website }}" target="_blank">Visit Website</a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No hospitals available.</p>
    {% endif %}
</div>
{% endblock %}
